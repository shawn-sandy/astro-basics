---
import { Image } from "astro:assets";

export type Props = {
  imgSrc: string;
  imgCaption?: string;
  imgAlt?: string;
  imgWidth?: number;
  imgHeight?: number;
};

const { imgSrc, imgAlt, imgWidth, imgHeight, imgCaption } = Astro.props;
const caption = imgCaption ? "" : imgAlt;
---

<figure>
  <Image
    src={imgSrc}
    alt=`${imgAlt}`
    width={imgWidth || 500}
    height={imgHeight || 500}
  />
  {imgCaption && <figcaption>{imgCaption}</figcaption>}
</figure>

<style>
  figure:has(img[alt]) {
    --img-display: flex;
    --figure-p: 0.5rem;
    --figure-bg: whitesmoke;
    display: var(--img-display);
    position: relative;
    padding: var(--figure-p);
    background-color: var(--figure-bg);
  }
  figure > figcaption {
    position: absolute;
    bottom: var(--figure-p);
    left: var(--figure-p);
    right: var(--figure-p);
    padding: var(--spc-3);
    background-color: rgba(245, 245, 245, 0.683);
  }
  figure > img {
    width: 100%;
    height: auto;
  }
</style>
